# CodePush Server Environment Configuration
# Copy this file to .env and fill in your values

# =============================================================================
# MANDATORY CONFIGURATION
# =============================================================================

# Server URL - HTTPS endpoint for your CodePush server
# For production: https://codepush.yourdomain.com
# For local dev: http://localhost:3000 or https://localhost:8443
CODE_PUSH_SERVER_URL=https://codepush.qa.crabi.net

# AWS S3 Storage Configuration
AWS_BUCKET_NAME=your-codepush-bucket
AWS_REGION=us-east-1
# AWS_ACCESS_KEY_ID=your-access-key-id  # Optional if using IAM roles
# AWS_SECRET_ACCESS_KEY=your-secret-key  # Optional if using IAM roles

# =============================================================================
# AUTHENTICATION CONFIGURATION
# =============================================================================

# GitHub OAuth (recommended for production)
GITHUB_CLIENT_ID=your-github-client-id
GITHUB_CLIENT_SECRET=your-github-client-secret

# Microsoft OAuth (optional)
# MICROSOFT_CLIENT_ID=your-microsoft-client-id
# MICROSOFT_CLIENT_SECRET=your-microsoft-client-secret

# =============================================================================
# DEVELOPMENT/DEBUG CONFIGURATION
# =============================================================================

# Set to 'false' for production (enables OAuth authentication)
# Set to 'true' only for local development (bypasses OAuth)
DEBUG_DISABLE_AUTH=false

# User ID to use when DEBUG_DISABLE_AUTH=true
DEBUG_USER_ID=

# =============================================================================
# APPLICATION CONFIGURATION
# =============================================================================

# Environment
NODE_ENV=development

# Base URL - Leave empty for ALB/reverse proxy setups
BASE_URL=

# Server port
PORT=3000

# Logging
LOGGING=true

# Enable package diffing for smaller updates
ENABLE_PACKAGE_DIFFING=true

# Allow new account registration
ENABLE_ACCOUNT_REGISTRATION=true

# =============================================================================
# REDIS CONFIGURATION (Optional)
# =============================================================================

# Redis for caching and session storage
# REDIS_HOST=your-redis-host
# REDIS_PORT=6379
# REDIS_DB=0
# REDIS_TLS_DISABLED=true  # Set to true if Redis doesn't use TLS

# =============================================================================
# OPTIONAL CONFIGURATION
# =============================================================================

# HTTPS for local development
# HTTPS=false

# Disable specific routes (for debugging)
# DISABLE_ACQUISITION=false
# DISABLE_MANAGEMENT=false

# File upload size limit (in MB)
# UPLOAD_SIZE_LIMIT_MB=200

# Azure Application Insights (optional)
# APP_INSIGHTS_INSTRUMENTATION_KEY=your-instrumentation-key

# Log invalid JSON requests
# LOG_INVALID_JSON_REQUESTS=false

# Azure KeyVault (optional)
# AZURE_KEYVAULT_ACCOUNT=your-keyvault-account
# CLIENT_ID=your-client-id
# CERTIFICATE_THUMBPRINT=your-certificate-thumbprint
# REFRESH_CREDENTIALS_INTERVAL=86400000
